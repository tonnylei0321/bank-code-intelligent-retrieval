# ✅ 最终验证指南

**更新时间**: 2026-01-12 15:10  
**状态**: 🟢 所有服务正常，可以开始验证

---

## 🎯 验证目标

验证系统的所有功能，包括：
1. ✅ 普通用户功能
2. ✅ 管理员专属功能
3. ✅ 权限隔离
4. ✅ 所有页面和按钮

---

## 📋 验证清单

### 第一部分：普通用户验证

#### 1. 登录测试
- [ ] 访问 http://localhost:3000
- [ ] 输入用户名：`testuser`
- [ ] 输入密码：`test123456`
- [ ] 点击"登录"
- [ ] ✅ 成功进入系统

#### 2. 仪表盘（Dashboard）
- [ ] 查看统计卡片（数据集、训练任务、查询次数）
- [ ] 查看最近训练任务列表
- [ ] 查看最近查询记录
- [ ] 点击快捷操作按钮
- [ ] ✅ 所有功能正常

#### 3. 数据管理
- [ ] 点击左侧菜单"数据管理"
- [ ] ✅ 页面正常显示（不再显示403错误）
- [ ] 查看数据集列表
- [ ] 点击"上传数据集"按钮
- [ ] ✅ 上传对话框正常打开
- [ ] 选择CSV或Excel文件
- [ ] 点击"上传"
- [ ] ✅ 上传成功
- [ ] 点击"详情"查看统计信息
- [ ] ✅ 详情抽屉正常显示
- [ ] 点击"预览"查看数据
- [ ] ✅ 预览抽屉正常显示
- [ ] 点击"验证"验证数据
- [ ] ✅ 验证功能正常

#### 4. 训练管理
- [ ] 点击左侧菜单"训练管理"
- [ ] ✅ 页面正常显示
- [ ] 查看训练任务列表
- [ ] 点击"创建训练任务"
- [ ] ✅ 创建对话框正常打开
- [ ] 选择数据集
- [ ] 输入模型名称
- [ ] 配置训练参数
- [ ] 点击"创建"
- [ ] ✅ 创建成功
- [ ] 查看训练进度
- [ ] ✅ 进度条正常显示
- [ ] 点击"详情"查看训练详情
- [ ] ✅ 详情抽屉正常显示
- [ ] 点击"停止"（如果有运行中的任务）
- [ ] ✅ 停止功能正常

#### 5. 模型管理
- [ ] 点击左侧菜单"模型管理"
- [ ] ✅ 页面正常显示
- [ ] 查看模型列表（已完成的训练任务）
- [ ] 点击"详情"查看模型信息
- [ ] ✅ 详情抽屉正常显示
- [ ] 点击"评估"启动评估
- [ ] ✅ 评估对话框正常打开
- [ ] 选择评估类型
- [ ] 选择测试数据集（可选）
- [ ] 点击"启动"
- [ ] ✅ 评估启动成功

#### 6. 智能问答
- [ ] 点击左侧菜单"智能问答"
- [ ] ✅ 页面正常显示
- [ ] 输入问题："中国银行的银行代码是什么？"
- [ ] 确认RAG开关已开启
- [ ] 点击"提问"或按回车
- [ ] ✅ 获得答案
- [ ] 查看响应时间
- [ ] ✅ 响应时间正常显示
- [ ] 查看参考文档（如有）
- [ ] ✅ 参考文档正常显示
- [ ] 查看右侧查询历史
- [ ] ✅ 历史记录正常显示
- [ ] 点击历史记录
- [ ] ✅ 问题回填成功

#### 7. 权限验证
- [ ] 检查左侧菜单
- [ ] ❌ 不应该看到"用户管理"
- [ ] ❌ 不应该看到"系统设置"
- [ ] ✅ 权限隔离正常

#### 8. 退出登录
- [ ] 点击右上角用户头像
- [ ] 点击"退出登录"
- [ ] ✅ 成功退出到登录页面

---

### 第二部分：管理员验证

#### 1. 管理员登录
- [ ] 访问 http://localhost:3000
- [ ] 输入用户名：`admin`
- [ ] 输入密码：`admin123456`
- [ ] 点击"登录"
- [ ] ✅ 成功进入系统

#### 2. 检查菜单
- [ ] 查看左侧菜单
- [ ] ✅ 看到"系统概览"
- [ ] ✅ 看到"数据管理"
- [ ] ✅ 看到"训练管理"
- [ ] ✅ 看到"模型管理"
- [ ] ✅ 看到"智能问答"
- [ ] ✅ 看到"用户管理" ⭐
- [ ] ✅ 看到"系统设置" ⭐

#### 3. 用户管理（管理员专属）
- [ ] 点击左侧菜单"用户管理"
- [ ] ✅ 页面正常显示
- [ ] 查看用户列表
- [ ] ✅ 看到testuser和admin
- [ ] 点击testuser的"详情"
- [ ] ✅ 详情抽屉正常显示
- [ ] 查看用户信息（ID、用户名、邮箱、角色、状态）
- [ ] ✅ 信息显示正确
- [ ] 关闭详情抽屉
- [ ] 点击testuser的"删除"
- [ ] ✅ 确认对话框弹出
- [ ] 点击"取消"（不实际删除）
- [ ] ✅ 取消成功
- [ ] 尝试点击admin的"删除"
- [ ] ✅ 删除按钮应该是禁用状态

#### 4. 系统设置（管理员专属）
- [ ] 点击左侧菜单"系统设置"
- [ ] ✅ 页面正常显示
- [ ] 查看系统日志列表
- [ ] ✅ 日志列表正常显示
- [ ] 点击日志级别下拉框
- [ ] ✅ 看到DEBUG、INFO、WARNING、ERROR、CRITICAL选项
- [ ] 选择"ERROR"
- [ ] ✅ 日志列表更新
- [ ] 清除筛选
- [ ] ✅ 显示所有日志
- [ ] 查看右侧日志文件列表
- [ ] ✅ 日志文件列表正常显示
- [ ] 查看系统信息卡片
- [ ] ✅ 系统信息正常显示

#### 5. 测试其他功能
- [ ] 测试数据管理（同普通用户）
- [ ] ✅ 所有功能正常
- [ ] 测试训练管理（同普通用户）
- [ ] ✅ 所有功能正常
- [ ] 测试模型管理（同普通用户）
- [ ] ✅ 所有功能正常
- [ ] 测试智能问答（同普通用户）
- [ ] ✅ 所有功能正常

---

## 🐛 常见问题处理

### 问题1：403权限错误
**症状**: 页面显示"Request failed with status code 403"

**解决方案**:
1. 刷新浏览器（Ctrl+F5 或 Cmd+Shift+R）
2. 清除浏览器缓存
3. 重新登录
4. 检查后端服务是否正常运行

### 问题2：看不到管理员菜单
**症状**: 使用admin登录后看不到"用户管理"和"系统设置"

**解决方案**:
1. 确认使用的是admin账号（不是testuser）
2. 刷新浏览器
3. 检查用户角色：打开浏览器控制台（F12），查看Redux状态
4. 重新登录

### 问题3：上传文件失败
**症状**: 上传数据集时显示错误

**解决方案**:
1. 确认文件格式是CSV或Excel
2. 确认文件大小不超过限制
3. 检查文件内容格式是否正确
4. 查看浏览器控制台错误信息

### 问题4：训练任务创建失败
**症状**: 创建训练任务时显示错误

**解决方案**:
1. 确认已上传并验证数据集
2. 确认模型名称不为空
3. 确认训练参数在合理范围内
4. 查看后端日志

### 问题5：问答没有返回结果
**症状**: 提交问题后没有答案

**解决方案**:
1. 确认至少有一个训练完成的模型
2. 确认问题格式清晰明确
3. 检查网络连接
4. 查看浏览器控制台错误

---

## 🔍 调试工具

### 浏览器开发者工具
```
按F12打开开发者工具

Console标签：查看JavaScript错误
Network标签：查看API请求和响应
Application标签：查看LocalStorage中的token
```

### 后端日志
```bash
# 查看后端日志
tail -f mvp/backend.log

# 查看最近50行
tail -50 mvp/backend.log
```

### 数据库查询
```bash
# 查看用户表
cd mvp
sqlite3 data/bank_code.db "SELECT * FROM users;"

# 查看数据集表
sqlite3 data/bank_code.db "SELECT * FROM datasets;"

# 查看训练任务表
sqlite3 data/bank_code.db "SELECT * FROM training_jobs;"
```

---

## 📊 验证结果记录

### 普通用户功能
- [ ] 登录：✅ / ❌
- [ ] 仪表盘：✅ / ❌
- [ ] 数据管理：✅ / ❌
- [ ] 训练管理：✅ / ❌
- [ ] 模型管理：✅ / ❌
- [ ] 智能问答：✅ / ❌
- [ ] 权限隔离：✅ / ❌

### 管理员功能
- [ ] 管理员登录：✅ / ❌
- [ ] 菜单显示：✅ / ❌
- [ ] 用户管理：✅ / ❌
- [ ] 系统设置：✅ / ❌
- [ ] 其他功能：✅ / ❌

---

## 🎯 验证完成标准

### 必须通过的测试
1. ✅ 普通用户可以登录
2. ✅ 普通用户可以使用所有核心功能
3. ✅ 普通用户看不到管理员菜单
4. ✅ 管理员可以登录
5. ✅ 管理员可以看到所有菜单
6. ✅ 管理员可以使用用户管理
7. ✅ 管理员可以使用系统设置
8. ✅ 所有页面无403错误
9. ✅ 所有按钮可以正常点击
10. ✅ 所有功能可以正常使用

---

## 📞 获取帮助

### 查看文档
- **使用指南**: 🎯完整系统使用指南.md
- **管理员说明**: 👨‍💼管理员账号说明.md
- **权限修复**: 🔧权限问题修复报告.md
- **服务状态**: 🟢服务运行状态.md

### 联系支持
- 查看后端日志：`tail -f mvp/backend.log`
- 查看浏览器控制台：按F12
- 查看API文档：http://localhost:8000/docs

---

## 🎉 验证成功！

如果所有测试都通过，恭喜您！系统已经完全可用：

✅ 前端7个页面全部实现  
✅ 后端30+个API全部可用  
✅ 权限控制完善  
✅ 用户体验良好  
✅ 功能完整可用  

**系统已准备好投入使用！** 🚀

---

**验证时间**: ___________  
**验证人**: ___________  
**验证结果**: ✅ 通过 / ❌ 未通过  
**备注**: ___________
