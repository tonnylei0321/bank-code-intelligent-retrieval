# 👨‍💼 管理员账号说明

**创建时间**: 2026-01-12  
**状态**: ✅ 已创建并可用

---

## 🔑 管理员账号信息

### 账号凭证
- **用户名**: `admin`
- **密码**: `admin123456`
- **角色**: 管理员（admin）
- **邮箱**: admin@example.com
- **状态**: 激活

### 登录地址
- **前端**: http://localhost:3000

---

## 👥 所有测试账号

### 1. 管理员账号
```
用户名: admin
密码: admin123456
角色: admin
权限: 全部功能
```

### 2. 普通用户账号
```
用户名: testuser
密码: test123456
角色: user
权限: 核心业务功能（不含用户管理和系统设置）
```

---

## 🎯 管理员专属功能

### 1. 用户管理（/users）
**功能**：
- ✅ 查看所有用户列表
- ✅ 查看用户详细信息
- ✅ 删除用户（不能删除管理员）
- ✅ 查看用户角色和状态

**访问方式**：
1. 使用admin账号登录
2. 点击左侧菜单"用户管理"
3. 查看和管理用户

### 2. 系统设置（/settings）
**功能**：
- ✅ 查看系统日志
- ✅ 按日志级别筛选（DEBUG、INFO、WARNING、ERROR、CRITICAL）
- ✅ 查看日志文件列表
- ✅ 查看系统信息

**访问方式**：
1. 使用admin账号登录
2. 点击左侧菜单"系统设置"
3. 查看日志和系统信息

---

## 📋 管理员权限对比

| 功能模块 | 普通用户 | 管理员 |
|---------|---------|--------|
| **系统概览** | ✅ | ✅ |
| **数据管理** | ✅ | ✅ |
| **训练管理** | ✅ | ✅ |
| **模型管理** | ✅ | ✅ |
| **智能问答** | ✅ | ✅ |
| **用户管理** | ❌ | ✅ |
| **系统设置** | ❌ | ✅ |

---

## 🔍 验证步骤

### 步骤1：使用管理员登录
1. 访问 http://localhost:3000
2. 输入用户名：`admin`
3. 输入密码：`admin123456`
4. 点击"登录"

### 步骤2：检查菜单
登录后，左侧菜单应该显示：
- ✅ 系统概览
- ✅ 数据管理
- ✅ 训练管理
- ✅ 模型管理
- ✅ 智能问答
- ✅ **用户管理** ⭐（管理员专属）
- ✅ **系统设置** ⭐（管理员专属）

### 步骤3：测试用户管理
1. 点击"用户管理"菜单
2. 应该能看到用户列表（包括admin和testuser）
3. 点击"详情"查看用户信息
4. 尝试删除testuser（应该成功）
5. 尝试删除admin（应该被禁止）

### 步骤4：测试系统设置
1. 点击"系统设置"菜单
2. 应该能看到系统日志列表
3. 尝试筛选不同的日志级别
4. 查看右侧的日志文件列表
5. 查看系统信息卡片

---

## 🎨 界面预期

### 管理员登录后的菜单
```
┌─────────────────────┐
│  小模型训练平台      │
├─────────────────────┤
│ 📊 系统概览         │
│ 💾 数据管理         │
│ 🚀 训练管理         │
│ 🤖 模型管理         │
│ 💬 智能问答         │
│ 👥 用户管理  ⭐     │
│ ⚙️  系统设置  ⭐     │
└─────────────────────┘
```

### 普通用户登录后的菜单
```
┌─────────────────────┐
│  小模型训练平台      │
├─────────────────────┤
│ 📊 系统概览         │
│ 💾 数据管理         │
│ 🚀 训练管理         │
│ 🤖 模型管理         │
│ 💬 智能问答         │
└─────────────────────┘
```

---

## 🔧 技术实现

### 前端路由保护
**文件**: `frontend/src/App.tsx`

```typescript
{/* 管理员专用路由 */}
{user?.role === 'admin' && (
  <>
    <Route path="/users" element={<UserManagement />} />
    <Route path="/settings" element={<SystemSettings />} />
  </>
)}
```

### 菜单动态显示
**文件**: `frontend/src/components/Layout/DashboardLayout.tsx`

```typescript
// 管理员专用菜单
if (user?.role === 'admin') {
  menuItems.push(
    {
      key: '/users',
      icon: <UserOutlined />,
      label: '用户管理',
    },
    {
      key: '/settings',
      icon: <SettingOutlined />,
      label: '系统设置',
    }
  );
}
```

### 后端API权限
**文件**: `mvp/app/api/admin.py`

```python
@router.get("/users", response_model=List[UserResponse])
@require_admin  # 仅管理员可访问
async def list_all_users(...)
```

---

## 💡 使用建议

### 管理员日常操作
1. **监控系统**：定期查看系统日志
2. **用户管理**：管理用户账号和权限
3. **数据审核**：审核用户上传的数据集
4. **系统维护**：查看系统状态和日志

### 安全建议
1. ⚠️ 不要删除admin账号
2. ⚠️ 定期更改管理员密码
3. ⚠️ 谨慎删除用户
4. ⚠️ 定期查看系统日志

---

## 🐛 故障排除

### 问题1：看不到用户管理和系统设置菜单

**可能原因**：
- 使用的不是admin账号
- 用户角色不是admin
- 前端缓存问题

**解决方案**：
1. 确认使用admin账号登录
2. 刷新浏览器（Ctrl+F5）
3. 清除浏览器缓存
4. 重新登录

### 问题2：用户管理页面显示403错误

**可能原因**：
- 后端API权限配置问题
- Token过期

**解决方案**：
1. 重新登录
2. 检查后端日志
3. 确认admin用户的role字段为"admin"

### 问题3：无法删除用户

**可能原因**：
- 尝试删除管理员账号（被保护）
- 后端API错误

**解决方案**：
1. 确认不是删除admin账号
2. 查看浏览器控制台错误
3. 查看后端日志

---

## 📊 数据库验证

### 查看用户表
```bash
# 进入mvp目录
cd mvp

# 使用sqlite3查看
sqlite3 *.db "SELECT id, username, email, role, is_active FROM users;"
```

**预期输出**：
```
1|testuser|test@example.com|user|1
2|admin|admin@example.com|admin|1
```

---

## 🎯 快速测试清单

### 管理员功能测试
- [ ] 使用admin账号登录成功
- [ ] 左侧菜单显示"用户管理"
- [ ] 左侧菜单显示"系统设置"
- [ ] 点击"用户管理"可以打开页面
- [ ] 可以查看用户列表
- [ ] 可以查看用户详情
- [ ] 可以删除普通用户
- [ ] 不能删除admin用户
- [ ] 点击"系统设置"可以打开页面
- [ ] 可以查看系统日志
- [ ] 可以筛选日志级别
- [ ] 可以查看日志文件列表

### 权限隔离测试
- [ ] 使用testuser登录
- [ ] 左侧菜单不显示"用户管理"
- [ ] 左侧菜单不显示"系统设置"
- [ ] 手动访问/users显示404或重定向
- [ ] 手动访问/settings显示404或重定向

---

## 📞 技术支持

### 重新创建管理员账号
```bash
python3 create_test_user.py
```

### 查看后端日志
```bash
tail -f mvp/backend.log
```

### 查看前端日志
- 打开浏览器开发者工具（F12）
- 查看Console标签

---

**账号状态**: ✅ 已创建  
**登录地址**: http://localhost:3000  
**管理员账号**: admin / admin123456  
**普通用户账号**: testuser / test123456

🎉 **请使用admin账号登录验证管理员功能！** 🎉
