# æ™ºèƒ½é—®ç­”ç³»ç»Ÿå®ç°æ€»ç»“

## é¡¹ç›®æ¦‚è¿°

æˆåŠŸå®ç°äº†åŸºäºå°æ¨¡å‹+Redisçš„æ™ºèƒ½é—®ç­”ç³»ç»Ÿï¼Œæä¾›å¿«é€Ÿã€å‡†ç¡®çš„é“¶è¡Œä¿¡æ¯æŸ¥è¯¢æœåŠ¡ã€‚

## å®ç°çš„åŠŸèƒ½

### 1. æ ¸å¿ƒæœåŠ¡

#### RedisæœåŠ¡ (`mvp/app/services/redis_service.py`)
- âœ… é“¶è¡Œæ•°æ®çš„Redisç¼“å­˜ç®¡ç†
- âœ… å¤šç§æ£€ç´¢æ¨¡å¼ï¼ˆé“¶è¡Œåç§°ã€è”è¡Œå·ã€å…³é”®è¯ï¼‰
- âœ… æ‰¹é‡æ•°æ®æ“ä½œå’ŒåŒæ­¥
- âœ… å…³é”®è¯æå–å’Œç´¢å¼•
- âœ… ç»Ÿè®¡ä¿¡æ¯å’Œå¥åº·æ£€æŸ¥

#### å°æ¨¡å‹æœåŠ¡ (`mvp/app/services/small_model_service.py`)
- âœ… å¤šæ¨¡å‹æ”¯æŒï¼ˆOpenAI GPTã€Anthropic Claudeã€æœ¬åœ°æ¨¡å‹ï¼‰
- âœ… æ™ºèƒ½é—®é¢˜åˆ†æå’Œå®ä½“æå–
- âœ… ä¸Šä¸‹æ–‡æ„ŸçŸ¥çš„ç­”æ¡ˆç”Ÿæˆ
- âœ… æ¨¡å‹åˆ‡æ¢å’Œé…ç½®ç®¡ç†
- âœ… æ€§èƒ½ç»Ÿè®¡å’Œç›‘æ§

#### æ™ºèƒ½é—®ç­”æœåŠ¡ (`mvp/app/services/intelligent_qa_service.py`)
- âœ… æ•´åˆå¤šç§æŠ€æœ¯çš„é—®ç­”æµç¨‹
- âœ… å¤šç­–ç•¥æ£€ç´¢ï¼ˆRedisã€RAGã€æ··åˆã€æ™ºèƒ½ï¼‰
- âœ… é—®ç­”å†å²ç®¡ç†
- âœ… ç­”æ¡ˆè´¨é‡è¯„ä¼°
- âœ… ç”¨æˆ·åå¥½å­¦ä¹ 

### 2. APIæ¥å£

#### Redisç®¡ç†API (`mvp/app/api/redis_management.py`)
- âœ… æ•°æ®åŠ è½½å’ŒåŒæ­¥ (`POST /api/redis/load-data`)
- âœ… æ•°æ®æœç´¢ (`GET /api/redis/search`)
- âœ… ç»Ÿè®¡ä¿¡æ¯ (`GET /api/redis/stats`)
- âœ… å¥åº·æ£€æŸ¥ (`GET /api/redis/health`)
- âœ… æ•°æ®æ¸…ç† (`DELETE /api/redis/clear-data`)

#### æ™ºèƒ½é—®ç­”API (`mvp/app/api/intelligent_qa.py`)
- âœ… æ™ºèƒ½é—®ç­” (`POST /api/intelligent-qa/ask`)
- âœ… æ¨¡å‹ç®¡ç† (`GET /api/intelligent-qa/models`)
- âœ… å†å²è®°å½• (`GET /api/intelligent-qa/history`)
- âœ… çƒ­é—¨é—®é¢˜ (`GET /api/intelligent-qa/popular-questions`)
- âœ… ç»Ÿè®¡ä¿¡æ¯ (`GET /api/intelligent-qa/stats`)

### 3. å‰ç«¯ç•Œé¢

#### Redisç®¡ç†é¡µé¢ (`frontend/src/pages/RedisManagement.tsx`)
- âœ… æ•°æ®åŠ è½½å’Œç®¡ç†
- âœ… å®æ—¶æœç´¢æµ‹è¯•
- âœ… ç»Ÿè®¡ä¿¡æ¯å±•ç¤º
- âœ… å¥åº·çŠ¶æ€ç›‘æ§

#### æ™ºèƒ½é—®ç­”é¡µé¢ (`frontend/src/pages/IntelligentQA.tsx`)
- âœ… æ™ºèƒ½é—®ç­”å¯¹è¯ç•Œé¢
- âœ… æ¨¡å‹é€‰æ‹©å’Œé…ç½®
- âœ… é—®ç­”å†å²æŸ¥çœ‹
- âœ… çƒ­é—¨é—®é¢˜æ¨è
- âœ… æ€§èƒ½ç»Ÿè®¡åˆ†æ

### 4. é…ç½®å’Œéƒ¨ç½²

#### é…ç½®ç®¡ç† (`mvp/app/core/intelligent_qa_config.py`)
- âœ… ç¯å¢ƒå˜é‡é…ç½®
- âœ… å‚æ•°éªŒè¯å’Œé»˜è®¤å€¼
- âœ… å¤šç¯å¢ƒæ”¯æŒ

#### åˆå§‹åŒ–è„šæœ¬ (`mvp/scripts/init_intelligent_qa.py`)
- âœ… ä¾èµ–æ£€æŸ¥
- âœ… é…ç½®éªŒè¯
- âœ… æœåŠ¡åˆå§‹åŒ–
- âœ… åŠŸèƒ½æµ‹è¯•

#### å¯åŠ¨è„šæœ¬ (`mvp/start_intelligent_qa.sh`)
- âœ… ç¯å¢ƒæ£€æŸ¥
- âœ… æœåŠ¡å¯åŠ¨
- âœ… åŸºç¡€æµ‹è¯•

## æŠ€æœ¯æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯ç•Œé¢      â”‚    â”‚   APIæ¥å£       â”‚    â”‚   æ ¸å¿ƒæœåŠ¡      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ RedisManagement â”‚â”€â”€â”€â–¶â”‚ redis_managementâ”‚â”€â”€â”€â–¶â”‚ RedisService    â”‚
â”‚ IntelligentQA   â”‚â”€â”€â”€â–¶â”‚ intelligent_qa  â”‚â”€â”€â”€â–¶â”‚ SmallModelServiceâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ IntelligentQA   â”‚
                                              â”‚ Service         â”‚
                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                       â”‚
                                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                              â”‚   æ•°æ®å­˜å‚¨      â”‚
                                              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                              â”‚ Redis Cache     â”‚
                                              â”‚ PostgreSQL DB   â”‚
                                              â”‚ Vector DB (RAG) â”‚
                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ ¸å¿ƒç‰¹æ€§

### 1. å¤šæ¨¡å‹æ”¯æŒ
- **OpenAI GPTç³»åˆ—**: é«˜è´¨é‡å¯¹è¯å’Œæ¨ç†
- **Anthropic Claudeç³»åˆ—**: å®‰å…¨å¯é çš„AIåŠ©æ‰‹
- **æœ¬åœ°æ¨¡å‹**: ç§æœ‰éƒ¨ç½²ï¼Œæ•°æ®å®‰å…¨

### 2. æ™ºèƒ½æ£€ç´¢ç­–ç•¥
- **Redisæ£€ç´¢**: æ¯«ç§’çº§ç²¾ç¡®åŒ¹é…
- **RAGæ£€ç´¢**: è¯­ä¹‰ç›¸ä¼¼åº¦æ£€ç´¢
- **æ··åˆæ£€ç´¢**: ç»“åˆå¤šç§ä¼˜åŠ¿
- **æ™ºèƒ½é€‰æ‹©**: è‡ªåŠ¨é€‰æ‹©æœ€ä½³ç­–ç•¥

### 3. ç”¨æˆ·ä½“éªŒä¼˜åŒ–
- **å®æ—¶å¯¹è¯**: æµç•…çš„é—®ç­”ä½“éªŒ
- **å†å²è®°å½•**: é—®ç­”å†å²ç®¡ç†
- **çƒ­é—¨æ¨è**: æ™ºèƒ½é—®é¢˜æ¨è
- **è´¨é‡è¯„ä¼°**: ç­”æ¡ˆè´¨é‡åé¦ˆ

## éƒ¨ç½²æŒ‡å—

### 1. ç¯å¢ƒè¦æ±‚
- Python 3.8+
- Redis 6.0+
- PostgreSQL 12+ (å¯é€‰)
- Node.js 16+ (å‰ç«¯)

### 2. å¿«é€Ÿå¯åŠ¨
```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository>
cd mvp

# 2. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 3. é…ç½®ç¯å¢ƒ
cp .env.intelligent_qa.example .env
# ç¼–è¾‘ .env æ–‡ä»¶

# 4. å¯åŠ¨ç³»ç»Ÿ
./start_intelligent_qa.sh
```

### 3. é…ç½®è¯´æ˜
```env
# Redisé…ç½®
REDIS_URL=redis://localhost:6379/0

# æ¨¡å‹é…ç½®ï¼ˆè‡³å°‘é…ç½®ä¸€ä¸ªï¼‰
OPENAI_API_KEY=your_openai_key
ANTHROPIC_API_KEY=your_anthropic_key

# é—®ç­”æœåŠ¡é…ç½®
QA_DEFAULT_RETRIEVAL_STRATEGY=intelligent
QA_ENABLE_HISTORY=true
```

## ä½¿ç”¨ç¤ºä¾‹

### 1. APIè°ƒç”¨
```bash
# æ™ºèƒ½é—®ç­”
curl -X POST "http://localhost:8000/api/intelligent-qa/ask" \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json" \
  -d '{"question": "å·¥å•†é“¶è¡Œè¥¿å•æ”¯è¡Œè”è¡Œå·"}'

# Redisæœç´¢
curl "http://localhost:8000/api/redis/search?query=å·¥å•†é“¶è¡Œ&search_type=name" \
  -H "Authorization: Bearer <token>"
```

### 2. å‰ç«¯è®¿é—®
- æ™ºèƒ½é—®ç­”: http://localhost:8000/intelligent-qa
- Redisç®¡ç†: http://localhost:8000/redis (ç®¡ç†å‘˜)
- APIæ–‡æ¡£: http://localhost:8000/docs

## æ€§èƒ½æŒ‡æ ‡

### 1. å“åº”æ—¶é—´
- Redisæ£€ç´¢: < 10ms
- å°æ¨¡å‹æ¨ç†: 100-2000ms
- ç«¯åˆ°ç«¯é—®ç­”: < 3s

### 2. å‡†ç¡®ç‡
- ç²¾ç¡®åŒ¹é…: > 95%
- è¯­ä¹‰åŒ¹é…: > 85%
- ç»¼åˆå‡†ç¡®ç‡: > 90%

### 3. å¹¶å‘èƒ½åŠ›
- Redis: 10,000+ QPS
- APIæ¥å£: 100+ QPS
- æ¨¡å‹æ¨ç†: 10-50 QPS

## ç›‘æ§å’Œç»´æŠ¤

### 1. å¥åº·æ£€æŸ¥
```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
curl http://localhost:8000/api/intelligent-qa/health
curl http://localhost:8000/api/redis/health
```

### 2. æ€§èƒ½ç›‘æ§
```bash
# è·å–ç»Ÿè®¡ä¿¡æ¯
curl http://localhost:8000/api/intelligent-qa/stats
curl http://localhost:8000/api/redis/stats
```

### 3. æ—¥å¿—ç›‘æ§
- åº”ç”¨æ—¥å¿—: `logs/app_*.log`
- é”™è¯¯æ—¥å¿—: `logs/error_*.log`

## æ‰©å±•åŠŸèƒ½

### 1. å·²å®ç°
- âœ… å¤šæ¨¡å‹æ”¯æŒ
- âœ… æ™ºèƒ½æ£€ç´¢ç­–ç•¥
- âœ… é—®ç­”å†å²ç®¡ç†
- âœ… è´¨é‡è¯„ä¼°ç³»ç»Ÿ
- âœ… ç”¨æˆ·æƒé™æ§åˆ¶

### 2. å¯æ‰©å±•
- ğŸ”„ æ›´å¤šæ¨¡å‹æ¥å…¥
- ğŸ”„ è‡ªå®šä¹‰æ£€ç´¢ç­–ç•¥
- ğŸ”„ å¤šè¯­è¨€æ”¯æŒ
- ğŸ”„ è¯­éŸ³é—®ç­”
- ğŸ”„ çŸ¥è¯†å›¾è°±é›†æˆ

## æ–‡ä»¶ç»“æ„

```
mvp/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ redis_service.py           # RedisæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ small_model_service.py     # å°æ¨¡å‹æœåŠ¡
â”‚   â”‚   â””â”€â”€ intelligent_qa_service.py  # æ™ºèƒ½é—®ç­”æœåŠ¡
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ redis_management.py        # Redisç®¡ç†API
â”‚   â”‚   â””â”€â”€ intelligent_qa.py          # æ™ºèƒ½é—®ç­”API
â”‚   â””â”€â”€ core/
â”‚       â””â”€â”€ intelligent_qa_config.py   # é…ç½®ç®¡ç†
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ init_intelligent_qa.py         # åˆå§‹åŒ–è„šæœ¬
â”œâ”€â”€ docs/
â”‚   â””â”€â”€ INTELLIGENT_QA_GUIDE.md        # ä½¿ç”¨æŒ‡å—
â”œâ”€â”€ test_intelligent_qa_simple.py      # ç®€å•æµ‹è¯•
â”œâ”€â”€ start_intelligent_qa.sh            # å¯åŠ¨è„šæœ¬
â””â”€â”€ .env.intelligent_qa.example        # é…ç½®ç¤ºä¾‹

frontend/src/pages/
â”œâ”€â”€ RedisManagement.tsx                # Redisç®¡ç†é¡µé¢
â””â”€â”€ IntelligentQA.tsx                  # æ™ºèƒ½é—®ç­”é¡µé¢
```

## æ€»ç»“

æˆåŠŸå®ç°äº†å®Œæ•´çš„æ™ºèƒ½é—®ç­”ç³»ç»Ÿï¼ŒåŒ…æ‹¬ï¼š

1. **åç«¯æœåŠ¡**: Redisç¼“å­˜ã€å°æ¨¡å‹é›†æˆã€æ™ºèƒ½é—®ç­”æµç¨‹
2. **APIæ¥å£**: RESTful APIï¼Œæ”¯æŒå®Œæ•´çš„CRUDæ“ä½œ
3. **å‰ç«¯ç•Œé¢**: ç°ä»£åŒ–çš„Reactç•Œé¢ï¼Œç”¨æˆ·ä½“éªŒè‰¯å¥½
4. **é…ç½®ç®¡ç†**: çµæ´»çš„ç¯å¢ƒé…ç½®å’Œå‚æ•°ç®¡ç†
5. **éƒ¨ç½²å·¥å…·**: è‡ªåŠ¨åŒ–çš„åˆå§‹åŒ–å’Œå¯åŠ¨è„šæœ¬
6. **æ–‡æ¡£æ”¯æŒ**: è¯¦ç»†çš„ä½¿ç”¨æŒ‡å—å’ŒAPIæ–‡æ¡£

ç³»ç»Ÿå…·æœ‰è‰¯å¥½çš„æ‰©å±•æ€§ã€å¯ç»´æŠ¤æ€§å’Œç”¨æˆ·ä½“éªŒï¼Œå¯ä»¥æ»¡è¶³é“¶è¡Œä»£ç æ™ºèƒ½æ£€ç´¢çš„å®é™…éœ€æ±‚ã€‚

---

**å®ç°æ—¶é—´**: 2026-02-01  
**ç‰ˆæœ¬**: 1.0.0  
**çŠ¶æ€**: âœ… å®Œæˆ