# ğŸ§ª æµ‹è¯•è´¦å·ä¿¡æ¯

**åˆ›å»ºæ—¶é—´**: 2026-01-11

---

## ğŸ“‹ å¯ç”¨æµ‹è¯•è´¦å·

### 1. æ™®é€šç”¨æˆ·è´¦å·
- **ç”¨æˆ·å**: `testuser`
- **å¯†ç **: `test123456`
- **è§’è‰²**: userï¼ˆæ™®é€šç”¨æˆ·ï¼‰
- **é‚®ç®±**: test@example.com
- **æƒé™**: 
  - æŸ¥çœ‹å’Œç®¡ç†è‡ªå·±çš„æ•°æ®é›†
  - åˆ›å»ºå’ŒæŸ¥çœ‹è®­ç»ƒä»»åŠ¡
  - ä½¿ç”¨æŸ¥è¯¢åŠŸèƒ½
  - æŸ¥çœ‹ä¸ªäººä¿¡æ¯

### 2. ç®¡ç†å‘˜è´¦å·
- **ç”¨æˆ·å**: `admin`
- **å¯†ç **: `admin123456`
- **è§’è‰²**: adminï¼ˆç®¡ç†å‘˜ï¼‰
- **é‚®ç®±**: admin@example.com
- **æƒé™**:
  - æ‰€æœ‰æ™®é€šç”¨æˆ·æƒé™
  - ç®¡ç†æ‰€æœ‰ç”¨æˆ·
  - åˆ›å»ºæ–°ç”¨æˆ·
  - æŸ¥çœ‹ç³»ç»Ÿç»Ÿè®¡
  - ç®¡ç†æ‰€æœ‰æ•°æ®é›†å’Œè®­ç»ƒä»»åŠ¡

---

## ğŸŒ ç™»å½•åœ°å€

### å‰ç«¯ç•Œé¢ç™»å½•
1. æ‰“å¼€æµè§ˆå™¨
2. è®¿é—®: **http://localhost:3000**
3. åœ¨ç™»å½•é¡µé¢è¾“å…¥ä¸Šè¿°è´¦å·ä¿¡æ¯
4. ç‚¹å‡»ç™»å½•

### APIç›´æ¥ç™»å½•ï¼ˆæµ‹è¯•ç”¨ï¼‰
```bash
# æ™®é€šç”¨æˆ·ç™»å½•
curl -X POST http://localhost:8000/api/v1/auth/login \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "username=testuser&password=test123456"

# ç®¡ç†å‘˜ç™»å½•
curl -X POST http://localhost:8000/api/v1/auth/login \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "username=admin&password=admin123456"
```

---

## âœ… éªŒè¯æµ‹è¯•æµç¨‹

### 1. æµ‹è¯•æ™®é€šç”¨æˆ·ç™»å½•
1. ä½¿ç”¨ `testuser / test123456` ç™»å½•å‰ç«¯
2. éªŒè¯èƒ½å¦è®¿é—®ä»¥ä¸‹åŠŸèƒ½ï¼š
   - âœ… æ•°æ®é›†ç®¡ç†
   - âœ… è®­ç»ƒä»»åŠ¡
   - âœ… æŸ¥è¯¢åŠŸèƒ½
   - âœ… ä¸ªäººä¿¡æ¯
3. éªŒè¯ä¸èƒ½è®¿é—®ï¼š
   - âŒ ç”¨æˆ·ç®¡ç†ï¼ˆä»…ç®¡ç†å‘˜ï¼‰
   - âŒ ç³»ç»Ÿè®¾ç½®ï¼ˆä»…ç®¡ç†å‘˜ï¼‰

### 2. æµ‹è¯•ç®¡ç†å‘˜ç™»å½•
1. é€€å‡ºå½“å‰è´¦å·
2. ä½¿ç”¨ `admin / admin123456` ç™»å½•
3. éªŒè¯èƒ½å¦è®¿é—®æ‰€æœ‰åŠŸèƒ½ï¼š
   - âœ… æ‰€æœ‰æ™®é€šç”¨æˆ·åŠŸèƒ½
   - âœ… ç”¨æˆ·ç®¡ç†
   - âœ… ç³»ç»Ÿç»Ÿè®¡
   - âœ… å…¨å±€æ•°æ®ç®¡ç†

### 3. æµ‹è¯•ç™»å½•é”™è¯¯å¤„ç†
1. ä½¿ç”¨é”™è¯¯çš„å¯†ç å°è¯•ç™»å½•
2. éªŒè¯æ˜¯å¦æ˜¾ç¤ºæ­£ç¡®çš„é”™è¯¯æç¤º
3. ä½¿ç”¨ä¸å­˜åœ¨çš„ç”¨æˆ·åå°è¯•ç™»å½•
4. éªŒè¯æ˜¯å¦æ˜¾ç¤ºæ­£ç¡®çš„é”™è¯¯æç¤º

### 4. æµ‹è¯•ä¼šè¯ä¿æŒ
1. ç™»å½•ååˆ·æ–°é¡µé¢
2. éªŒè¯æ˜¯å¦ä¿æŒç™»å½•çŠ¶æ€
3. å…³é—­æµè§ˆå™¨åé‡æ–°æ‰“å¼€
4. éªŒè¯æ˜¯å¦éœ€è¦é‡æ–°ç™»å½•

---

## ğŸ”§ æ•…éšœæ’é™¤

### é—®é¢˜1: ç™»å½•æç¤º401é”™è¯¯
**åŸå› **: ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼Œæˆ–æ•°æ®åº“ä¸­æ²¡æœ‰è¯¥ç”¨æˆ·

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥æ•°æ®åº“ä¸­çš„ç”¨æˆ·
sqlite3 mvp/data/bank_code.db "SELECT id, username, email, role FROM users;"

# å¦‚æœæ²¡æœ‰ç”¨æˆ·ï¼Œé‡æ–°åˆ›å»º
# è§ä¸‹æ–¹"é‡æ–°åˆ›å»ºæµ‹è¯•ç”¨æˆ·"éƒ¨åˆ†
```

### é—®é¢˜2: ç™»å½•æç¤º422é”™è¯¯
**åŸå› **: è¯·æ±‚æ ¼å¼ä¸æ­£ç¡®

**è§£å†³æ–¹æ¡ˆ**:
- å‰ç«¯å·²ä¿®å¤ï¼Œä½¿ç”¨ `application/x-www-form-urlencoded` æ ¼å¼
- å¦‚æœä»æœ‰é—®é¢˜ï¼Œæ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°çš„ç½‘ç»œè¯·æ±‚

### é—®é¢˜3: ç™»å½•åæ— æ³•è®¿é—®å…¶ä»–é¡µé¢
**åŸå› **: Tokenæœªæ­£ç¡®ä¿å­˜æˆ–å‘é€

**è§£å†³æ–¹æ¡ˆ**:
1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·
2. æ£€æŸ¥ localStorage ä¸­æ˜¯å¦æœ‰ `access_token`
3. æ£€æŸ¥ç½‘ç»œè¯·æ±‚å¤´ä¸­æ˜¯å¦æœ‰ `Authorization: Bearer <token>`

---

## ğŸ”„ é‡æ–°åˆ›å»ºæµ‹è¯•ç”¨æˆ·

å¦‚æœéœ€è¦é‡æ–°åˆ›å»ºæµ‹è¯•ç”¨æˆ·ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹SQLå‘½ä»¤ï¼š

```bash
# åˆ é™¤ç°æœ‰ç”¨æˆ·
sqlite3 mvp/data/bank_code.db "DELETE FROM users;"

# åˆ›å»ºæµ‹è¯•ç”¨æˆ·ï¼ˆå¯†ç : test123456ï¼‰
sqlite3 mvp/data/bank_code.db "
INSERT INTO users (username, email, hashed_password, role, is_active, created_at, updated_at)
VALUES ('testuser', 'test@example.com', '\$2b\$12\$p6zBnu7lMSUrYClaTyPymu/SUKaNWOt5Gf6d3K64vomZIaogi/9m.', 'user', 1, datetime('now'), datetime('now'));
"

# åˆ›å»ºç®¡ç†å‘˜ç”¨æˆ·ï¼ˆå¯†ç : admin123456ï¼‰
sqlite3 mvp/data/bank_code.db "
INSERT INTO users (username, email, hashed_password, role, is_active, created_at, updated_at)
VALUES ('admin', 'admin@example.com', '\$2b\$12\$WW/ihelZ1FI47N0RUgiNLu7EJMuQDcBKG8XisqXVAiWV2UpCmgCZS', 'admin', 1, datetime('now'), datetime('now'));
"

# éªŒè¯ç”¨æˆ·å·²åˆ›å»º
sqlite3 mvp/data/bank_code.db "SELECT id, username, email, role FROM users;"
```

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **å¯†ç å®‰å…¨**: è¿™äº›æ˜¯æµ‹è¯•è´¦å·ï¼Œä»…ç”¨äºå¼€å‘å’Œæµ‹è¯•ç¯å¢ƒ
2. **ç”Ÿäº§ç¯å¢ƒ**: åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œè¯·ä½¿ç”¨å¼ºå¯†ç å¹¶é€šè¿‡å®‰å…¨çš„æ–¹å¼åˆ›å»ºç”¨æˆ·
3. **Tokenè¿‡æœŸ**: è®¿é—®ä»¤ç‰Œä¼šåœ¨ä¸€å®šæ—¶é—´åè¿‡æœŸï¼ˆé»˜è®¤24å°æ—¶ï¼‰ï¼Œéœ€è¦é‡æ–°ç™»å½•
4. **æ•°æ®åº“å¤‡ä»½**: åœ¨ä¿®æ”¹æ•°æ®åº“å‰ï¼Œå»ºè®®å…ˆå¤‡ä»½

---

## ğŸ¯ å¿«é€Ÿæµ‹è¯•å‘½ä»¤

```bash
# 1. æ£€æŸ¥æœåŠ¡çŠ¶æ€
curl http://localhost:8000/health
curl http://localhost:3000

# 2. æµ‹è¯•ç™»å½•
curl -X POST http://localhost:8000/api/v1/auth/login \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "username=testuser&password=test123456"

# 3. ä½¿ç”¨tokenè®¿é—®ç”¨æˆ·ä¿¡æ¯
TOKEN="<your_token_here>"
curl http://localhost:8000/api/v1/auth/me \
  -H "Authorization: Bearer $TOKEN"

# 4. æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·ï¼ˆéœ€è¦ç®¡ç†å‘˜tokenï¼‰
curl http://localhost:8000/api/v1/admin/users \
  -H "Authorization: Bearer $ADMIN_TOKEN"
```

---

## ğŸš€ å¼€å§‹æµ‹è¯•

**ç°åœ¨å¯ä»¥å¼€å§‹éªŒè¯æµ‹è¯•äº†ï¼**

1. æ‰“å¼€æµè§ˆå™¨è®¿é—®: **http://localhost:3000**
2. ä½¿ç”¨æµ‹è¯•è´¦å·ç™»å½•
3. æµ‹è¯•å„é¡¹åŠŸèƒ½
4. å¦‚æœ‰é—®é¢˜ï¼ŒæŸ¥çœ‹æœ¬æ–‡æ¡£çš„æ•…éšœæ’é™¤éƒ¨åˆ†

**ç¥æµ‹è¯•é¡ºåˆ©ï¼** ğŸ‰
