# 📝 样本生成历史记录使用说明

## 🎯 问题解决

**之前的问题**：在"生成任务"Tab中看不到任何任务信息

**现在的解决方案**：
- ✅ 移除了"生成任务"Tab（避免困惑）
- ✅ 添加了"生成历史记录"功能（更实用）
- ✅ 自动保存每次生成的详细信息

## 📍 在哪里查看？

### 位置

```
样本管理 → 样本管理 → 生成样本 → 生成配置 → 滚动到底部
```

### 界面展示

```
┌─────────────────────────────────────────────┐
│  生成配置                                    │
│  [各种配置选项...]                           │
│  [开始生成样本]                              │
├─────────────────────────────────────────────┤
│  最近生成记录                                │
├─────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────┐│
│  │ ✅ 成功  T_BANK_LINE_NO_ICBC_ALL.unl    ││
│  │                                         ││
│  │ 总计: 687    训练集: 548                ││
│  │ 验证集: 67   测试集: 72                 ││
│  │                                         ││
│  │ LLM: qwen  类型: exact, fuzzy           ││
│  │ 2026-02-01 20:30:15                     ││
│  └─────────────────────────────────────────┘│
│                                             │
│  [更多记录...]                               │
│                                             │
│  [查看全部 10 条记录]                        │
└─────────────────────────────────────────────┘
```

## ✨ 功能特性

### 1. 自动记录

每次生成样本后，系统会自动保存：
- ✅ 数据集名称
- ✅ 生成数量（总数、训练集、验证集、测试集）
- ✅ 使用的LLM提供商
- ✅ 问题类型
- ✅ 生成时间
- ✅ 成功/失败状态
- ✅ 错误信息（如果失败）

### 2. 显示最近记录

- 自动显示最近5条生成记录
- 卡片式展示，清晰易读
- 包含完整的统计信息

### 3. 查看全部历史

- 点击"查看全部 X 条记录"按钮
- 弹窗显示所有历史记录
- 最多保存50条记录

### 4. 数据持久化

- 使用浏览器localStorage保存
- 刷新页面后数据不丢失
- 关闭浏览器后数据仍然保留

## 📊 记录内容说明

### 成功记录

```
┌─────────────────────────────────────────┐
│ ✅ 成功  T_BANK_LINE_NO_ICBC_ALL.unl    │
│                                         │
│ 总计: 687      ← 总共生成的样本数       │
│ 训练集: 548    ← 训练集样本数           │
│ 验证集: 67     ← 验证集样本数           │
│ 测试集: 72     ← 测试集样本数           │
│                                         │
│ LLM: qwen      ← 使用的LLM提供商        │
│ 类型: exact, fuzzy  ← 问题类型         │
│ 2026-02-01 20:30:15  ← 生成时间        │
└─────────────────────────────────────────┘
```

### 失败记录

```
┌─────────────────────────────────────────┐
│ ❌ 失败  test_data.csv                  │
│                                         │
│ 错误: Dataset not found                │
│                                         │
│ LLM: qwen                               │
│ 类型: exact                             │
│ 2026-02-01 20:25:10                     │
└─────────────────────────────────────────┘
```

## 🎬 使用流程

### 步骤1: 生成样本

1. 打开样本生成弹窗
2. 配置生成参数
3. 点击"开始生成样本"
4. 等待生成完成

### 步骤2: 查看结果

生成完成后：
1. 弹出统计信息弹窗
2. 查看详细统计
3. 点击"确定"关闭弹窗

### 步骤3: 查看历史

关闭弹窗后：
1. 滚动到页面底部
2. 看到"最近生成记录"卡片
3. 新的生成记录出现在顶部

### 步骤4: 查看全部（可选）

如果有多条记录：
1. 点击"查看全部 X 条记录"按钮
2. 弹窗显示所有历史记录
3. 可以滚动查看所有记录

## 💡 实用技巧

### 技巧1: 对比不同配置

通过历史记录，可以对比不同配置的效果：

```
记录1: LLM=qwen, 类型=exact → 生成687个
记录2: LLM=local, 类型=exact → 生成685个
记录3: LLM=qwen, 类型=exact,fuzzy → 生成1374个
```

**结论**：可以看出不同配置的生成数量差异

### 技巧2: 追踪失败原因

如果生成失败，历史记录会保存错误信息：

```
❌ 失败  错误: API认证失败
→ 需要检查API密钥配置

❌ 失败  错误: Dataset not found
→ 数据集可能已被删除

❌ 失败  错误: Failed to generate QA pairs
→ 需要查看后端日志
```

### 技巧3: 验证生成效果

生成后立即查看历史记录，确认：
- ✅ 生成数量是否符合预期
- ✅ 训练集/验证集/测试集比例是否正确
- ✅ 使用的LLM和问题类型是否正确

### 技巧4: 记录最佳配置

找到效果最好的配置后，可以：
1. 查看历史记录中的参数
2. 记录下来
3. 下次使用相同配置

## ❓ 常见问题

### Q: 历史记录会保存多久？

A: 
- 保存在浏览器localStorage中
- 只要不清除浏览器数据，就会一直保存
- 最多保存50条记录
- 超过50条时，自动删除最旧的记录

### Q: 如何清除历史记录？

A: 
有两种方法：

**方法1**: 清除浏览器数据
1. 浏览器设置 → 隐私和安全
2. 清除浏览数据
3. 选择"Cookie和其他网站数据"
4. 清除

**方法2**: 使用浏览器控制台
1. 按F12打开开发者工具
2. 切换到Console标签
3. 输入：`localStorage.removeItem('sample_generation_history')`
4. 按回车

### Q: 可以导出历史记录吗？

A: 
目前版本不支持直接导出，但可以通过浏览器控制台获取：

```javascript
// 1. 按F12打开开发者工具
// 2. 切换到Console标签
// 3. 输入以下命令：

const history = localStorage.getItem('sample_generation_history');
console.log(JSON.parse(history));

// 或者复制到剪贴板：
copy(history);
```

### Q: 历史记录占用多少空间？

A: 
- 每条记录约200-300字节
- 50条记录约10-15KB
- 对浏览器存储影响很小

### Q: 换电脑后历史记录还在吗？

A: 
- 不在，因为保存在本地浏览器
- 如需迁移，可以：
  1. 在旧电脑导出历史记录
  2. 在新电脑导入

**导出**：
```javascript
copy(localStorage.getItem('sample_generation_history'));
```

**导入**：
```javascript
localStorage.setItem('sample_generation_history', '粘贴导出的内容');
```

## 🔍 与"生成任务"Tab的区别

### 之前的"生成任务"Tab

**问题**：
- ❌ 显示为空，看不到任何信息
- ❌ 依赖异步任务API（未实现）
- ❌ 与当前同步生成模式不兼容

### 现在的"生成历史记录"

**优势**：
- ✅ 立即显示历史记录
- ✅ 无需后端支持
- ✅ 数据持久化
- ✅ 更适合当前使用场景

## 🎯 总结

### 核心功能

1. **自动记录** - 每次生成后自动保存
2. **详细信息** - 包含完整统计数据
3. **持久化** - 浏览器关闭后数据不丢失
4. **易于查看** - 清晰的卡片式展示

### 使用位置

```
样本管理 → 样本管理 → 生成样本 → 生成配置 → 底部
```

### 显示内容

- 最近5条生成记录
- 每条记录的详细统计
- 成功/失败状态
- 生成时间和参数

### 数据管理

- 自动保存最近50条
- 使用localStorage持久化
- 可以手动清除或导出

---

**提示**：现在就去试试生成样本，然后查看底部的历史记录吧！🚀

**文档更新**: 2026-02-01  
**版本**: v1.0.0
