# 智能问答RAG开关功能说明

## 🎯 功能概述

为智能问答页面添加了"RAG检索增强"开关功能，用户可以通过简单的开关操作选择使用不同的检索方式。

## 🔧 功能实现

### 前端界面修改

1. **添加RAG开关**
   - 位置：页面顶部右侧，模型选择器旁边
   - 样式：Switch组件，显示"RAG"和"Redis"标签
   - 交互：点击切换检索方式

2. **检索方式说明**
   - 位置：问答输入框下方
   - 内容：显示当前检索方式和适用场景说明
   - 样式：浅色背景，小字体提示

3. **系统状态更新**
   - 右侧系统状态卡片显示当前检索方式
   - 根据开关状态动态更新颜色和文字

### 逻辑处理

```typescript
// RAG开关处理逻辑
const handleRAGToggle = (checked: boolean) => {
  setUseRAG(checked);
  // 根据开关状态设置检索策略
  if (checked) {
    setStrategy('rag_only'); // 勾选时使用RAG检索
  } else {
    setStrategy('redis_only'); // 关闭时使用Redis检索
  }
};
```

## 📋 使用说明

### 1. RAG检索增强（开关开启）
- **检索方式**：使用向量数据库进行语义相似度检索
- **适用场景**：复杂查询、模糊匹配、语义理解
- **特点**：
  - 支持自然语言查询
  - 语义相似度匹配
  - 适合复杂问题理解
  - 响应时间相对较长

### 2. Redis快速检索（开关关闭）
- **检索方式**：使用Redis缓存进行快速精确匹配
- **适用场景**：精确查询、联行号查询、银行名称查询
- **特点**：
  - 毫秒级响应速度
  - 精确匹配查询
  - 适合明确的查询条件
  - 高性能缓存检索

## 🎨 界面设计

### 开关样式
```tsx
<Switch
  checked={useRAG}
  onChange={handleRAGToggle}
  checkedChildren="RAG"
  unCheckedChildren="Redis"
/>
```

### 状态提示
```tsx
<Tag color={useRAG ? 'green' : 'blue'} size="small">
  {useRAG ? 'RAG检索增强' : 'Redis快速检索'}
</Tag>
```

### 说明文字
- **RAG模式**：使用向量数据库进行语义相似度检索，适合复杂查询
- **Redis模式**：使用Redis缓存进行快速精确匹配，适合精确查询

## 🧪 测试验证

### 测试场景
1. **开关切换测试**：验证开关状态正确切换检索策略
2. **Redis检索测试**：验证关闭开关时使用Redis检索
3. **RAG检索测试**：验证开启开关时使用RAG检索
4. **界面更新测试**：验证状态显示正确更新

### 测试结果
- ✅ 开关功能正常工作
- ✅ 检索策略正确切换
- ✅ 后端API响应正常
- ✅ 界面状态同步更新

## 📊 用户体验优化

### 1. 直观的开关设计
- 清晰的标签显示（RAG/Redis）
- 颜色区分不同状态
- 即时反馈用户操作

### 2. 详细的功能说明
- 当前检索方式提示
- 适用场景说明
- 帮助用户选择合适的检索方式

### 3. 实时状态显示
- 系统状态卡片实时更新
- 颜色编码区分不同模式
- 一目了然的当前配置

## 🔄 工作流程

1. **用户访问智能问答页面**
   - 默认使用Redis检索（开关关闭状态）
   - 显示当前检索方式和说明

2. **用户切换检索方式**
   - 点击RAG开关
   - 系统自动更新检索策略
   - 界面状态实时更新

3. **用户提交问题**
   - 系统根据当前开关状态选择检索方式
   - 执行相应的检索逻辑
   - 返回检索结果

## 🎉 功能优势

1. **简化操作**：一个开关控制两种检索方式
2. **用户友好**：清晰的界面提示和说明
3. **灵活选择**：用户可根据需求选择最适合的检索方式
4. **性能优化**：Redis检索提供高速响应，RAG检索提供智能理解
5. **无缝切换**：开关状态即时生效，无需页面刷新

这个功能让用户能够根据不同的查询需求，灵活选择最适合的检索方式，提升了系统的易用性和查询效果。