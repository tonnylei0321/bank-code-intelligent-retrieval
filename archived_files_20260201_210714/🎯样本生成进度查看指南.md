# 🎯 样本生成进度查看指南

## 📍 在哪里看进度？

### 方式1: 生成完成后查看统计（推荐）

```
样本管理 → 样本管理 → 生成样本 → 生成配置 → 开始生成
                                              ↓
                                    等待生成完成
                                              ↓
                                    弹出统计信息弹窗
                                              ↓
                        ✅ 总计生成: 687 个样本
                        📊 训练集: 548
                        📊 验证集: 67
                        📊 测试集: 72
```

**特点**：
- ✅ 最简单直接
- ✅ 立即看到完整结果
- ✅ 包含详细统计信息
- ⏱️ 需要等待生成完成

### 方式2: 查看后端日志（实时监控）

```bash
# 在终端执行
tail -f mvp/logs/app_2026-02-01.log
```

**日志内容示例**：
```
2026-02-01 20:20:15 | INFO | 开始批量生成问答对 - 记录数: 100, 类型: ['exact', 'fuzzy']
2026-02-01 20:20:16 | INFO | 问答对生成成功 - 记录ID: 1, 类型: exact, 耗时: 0.85秒
2026-02-01 20:20:17 | INFO | 本地生成问答对成功 - 记录ID: 2, 类型: fuzzy
2026-02-01 20:20:18 | INFO | 问答对生成成功 - 记录ID: 3, 类型: exact, 耗时: 0.92秒
...
2026-02-01 20:22:30 | INFO | 批量问答对生成完成 - 总计: 200, 成功: 198, 失败: 2, 耗时: 135秒
```

**特点**：
- ✅ 实时查看进度
- ✅ 看到每条记录的处理情况
- ✅ 可以监控错误
- 🖥️ 需要打开终端

### 方式3: 查看生成任务列表（历史记录）

```
样本管理 → 样本管理 → 生成样本 → 生成任务 Tab
```

**显示内容**：

| 任务ID | 数据集 | 状态 | 进度 | 生成样本数 | 创建时间 | 操作 |
|--------|--------|------|------|-----------|----------|------|
| 12ab34cd | T_BANK_LINE... | ✅ 已完成 | 100% | 687 | 2026-02-01 20:20 | 查看 |
| 56ef78gh | test_data.csv | 🔵 运行中 | 45% | 234 | 2026-02-01 20:25 | 查看/取消 |
| 9abc12de | sample.unl | ⏸️ 等待中 | 0% | 0 | 2026-02-01 20:30 | 查看/取消 |

**特点**：
- ✅ 查看所有历史任务
- ✅ 看到任务状态和进度
- ✅ 可以查看任务详情
- 📝 适合管理多个任务

## 🎬 完整操作流程

### 步骤1: 打开样本生成界面

1. 登录系统: http://localhost:3000
2. 点击左侧菜单 "样本管理"
3. 选择 "样本管理" 子菜单
4. 选择一个数据集
5. 点击 "生成样本" 按钮

### 步骤2: 配置生成参数

在 **"生成配置"** Tab 中：

```
┌─────────────────────────────────────┐
│  生成配置                            │
├─────────────────────────────────────┤
│                                     │
│  选择数据集: [T_BANK_LINE_NO_ICBC_ALL.unl ▼]
│                                     │
│  ─── 样本挑选策略 ───                │
│  挑选策略: [全部数据 ▼]              │
│  记录数策略: [自定义数量 ▼]          │
│  自定义记录数: [100]                 │
│                                     │
│  ─── 生成方式 ───                    │
│  生成类型: ⦿ LLM生成  ○ 规则生成    │
│  LLM提供商: [通义千问 (Qwen) ▼]     │
│                                     │
│  问题类型:                           │
│  ☑ 精确查询  ☑ 模糊查询              │
│  ☑ 反向查询  ☑ 自然语言              │
│                                     │
│  [▶ 开始生成样本]                    │
└─────────────────────────────────────┘
```

### 步骤3: 开始生成并等待

点击 "开始生成样本" 后：

```
┌─────────────────────────────────────┐
│  ⏳ 正在生成样本，请稍候...          │
│                                     │
│  [加载动画]                          │
└─────────────────────────────────────┘
```

**此时可以**：
- 等待完成（推荐）
- 打开终端查看日志（可选）
- 切换到其他页面（不推荐，可能中断）

### 步骤4: 查看生成结果

生成完成后，会弹出统计信息：

```
┌─────────────────────────────────────┐
│  ✅ 样本生成完成                     │
├─────────────────────────────────────┤
│                                     │
│  ✅ 总计生成: 687 个样本             │
│  📊 训练集: 548                      │
│  📊 验证集: 67                       │
│  📊 测试集: 72                       │
│                                     │
│  ⚠️ 部分记录生成失败:                │
│    • 2 QA pairs failed to generate  │
│    • Record 4011: 1 failures        │
│                                     │
│  [确定]                              │
└─────────────────────────────────────┘
```

### 步骤5: 查看生成的样本

关闭弹窗后：

1. 样本列表会自动刷新
2. 可以看到新生成的样本
3. 点击 "查看" 按钮查看样本详情

## ⏱️ 生成时间参考

### 本地模板生成器

| 记录数 | 问题类型 | 预计时间 |
|--------|---------|---------|
| 10 | 1种 | ~1秒 |
| 10 | 4种 | ~2秒 |
| 100 | 1种 | ~5秒 |
| 100 | 4种 | ~10秒 |
| 1000 | 4种 | ~60秒 |

### LLM API（通义千问/DeepSeek/火山引擎）

| 记录数 | 问题类型 | 预计时间 |
|--------|---------|---------|
| 10 | 1种 | ~10-20秒 |
| 10 | 4种 | ~40-80秒 |
| 100 | 1种 | ~2-5分钟 |
| 100 | 4种 | ~8-20分钟 |
| 1000 | 4种 | ~80-200分钟 |

**建议**：
- 测试时使用 10-50 条记录
- 正式生成时使用本地模板（最快）
- 需要高质量时使用 LLM API

## 💡 实用技巧

### 技巧1: 小批量测试

**目的**: 快速验证配置是否正确

**配置**:
```
记录数策略: 自定义数量
自定义记录数: 10
LLM提供商: local
问题类型: 精确查询
```

**时间**: ~1秒  
**结果**: 快速看到生成效果

### 技巧2: 分批生成

**目的**: 避免长时间等待

**方法**:
```
第1批: 100条记录 → 生成 → 查看结果
第2批: 100条记录 → 生成 → 查看结果
第3批: 100条记录 → 生成 → 查看结果
```

**优点**:
- 可以随时停止
- 可以调整参数
- 降低失败风险

### 技巧3: 使用本地模板

**目的**: 快速生成大量样本

**配置**:
```
LLM提供商: local
记录数策略: 全部记录
问题类型: 全选
```

**优点**:
- 速度最快
- 不需要API密钥
- 不受网络影响
- 质量稳定

### 技巧4: 监控日志

**目的**: 实时了解生成进度

**操作**:
```bash
# 打开新终端窗口
tail -f mvp/logs/app_2026-02-01.log | grep "生成"
```

**看到**:
```
问答对生成成功 - 记录ID: 1
问答对生成成功 - 记录ID: 2
问答对生成成功 - 记录ID: 3
...
```

## 🔍 状态说明

### 任务状态

| 状态 | 图标 | 说明 | 可操作 |
|------|------|------|--------|
| 等待中 | 🟠 | 任务已创建，等待执行 | 取消 |
| 运行中 | 🔵 | 正在生成样本 | 查看、取消 |
| 已完成 | ✅ | 生成成功完成 | 查看 |
| 失败 | ❌ | 生成过程出错 | 查看 |
| 已取消 | ⚪ | 用户手动取消 | 查看 |

### 进度百分比

```
0%   ████░░░░░░░░░░░░░░░░  10%   开始处理
25%  █████████░░░░░░░░░░░  35%   处理中
50%  ██████████████░░░░░░  65%   过半
75%  ███████████████████░  90%   接近完成
100% ████████████████████  100%  完成
```

## 📱 界面截图说明

### 生成配置界面

```
┌────────────────────────────────────────────────┐
│  样本生成                                       │
├────────────────────────────────────────────────┤
│  [生成配置] [生成任务]  ← Tab切换               │
├────────────────────────────────────────────────┤
│                                                │
│  智能样本生成                                   │
│  基于已上传的数据集，使用多种策略自动生成...    │
│                                                │
│  ┌──────────────────────────────────────────┐ │
│  │  生成配置                                 │ │
│  ├──────────────────────────────────────────┤ │
│  │  选择数据集: [下拉选择]                   │ │
│  │  任务名称: [可选]                         │ │
│  │                                          │ │
│  │  ─── 样本挑选策略 ───                     │ │
│  │  挑选策略: [下拉选择]                     │ │
│  │  记录数策略: [下拉选择]                   │ │
│  │                                          │ │
│  │  ─── 生成方式 ───                         │ │
│  │  生成类型: ⦿ LLM生成  ○ 规则生成         │ │
│  │  LLM提供商: [下拉选择]                    │ │
│  │  问题类型: [多选框]                       │ │
│  │                                          │ │
│  │  [▶ 开始生成样本]                         │ │
│  └──────────────────────────────────────────┘ │
└────────────────────────────────────────────────┘
```

### 生成任务界面

```
┌────────────────────────────────────────────────┐
│  样本生成                                       │
├────────────────────────────────────────────────┤
│  [生成配置] [生成任务]  ← Tab切换               │
├────────────────────────────────────────────────┤
│                                                │
│  生成任务                          [🔄 刷新]    │
│  ┌──────────────────────────────────────────┐ │
│  │ 任务ID  │ 数据集 │ 状态 │ 进度 │ 操作    │ │
│  ├──────────────────────────────────────────┤ │
│  │ 12ab... │ T_BANK │ ✅   │ 100% │ [查看]  │ │
│  │ 56ef... │ test   │ 🔵   │ 45%  │ [查看]  │ │
│  │ 9abc... │ sample │ 🟠   │ 0%   │ [取消]  │ │
│  └──────────────────────────────────────────┘ │
└────────────────────────────────────────────────┘
```

## ❓ 常见问题

### Q: 点击生成后没有反应？

**检查**:
1. 是否填写了所有必填项（红色*标记）
2. 是否选择了至少一种问题类型
3. 查看浏览器控制台是否有错误
4. 检查后端服务是否运行

### Q: 生成时间太长怎么办？

**解决方案**:
1. 使用本地模板生成器（最快）
2. 减少记录数量
3. 减少问题类型数量
4. 分批生成

### Q: 如何知道生成是否成功？

**判断方法**:
1. 等待弹出统计信息弹窗
2. 查看样本列表是否增加
3. 查看后端日志最后一行
4. 检查生成任务列表状态

### Q: 可以同时生成多个任务吗？

**当前版本**: 不建议
- 同步模式下，需要等待当前任务完成
- 可以在不同数据集上分别生成
- 建议一个一个生成，避免冲突

## 🎯 总结

### 最简单的方式

```
1. 配置参数
2. 点击生成
3. 等待完成
4. 查看弹窗统计
```

### 最快的方式

```
LLM提供商: local
记录数: 10-50
问题类型: 1-2种
```

### 最详细的方式

```
1. 打开终端监控日志
2. 配置参数并生成
3. 实时查看日志输出
4. 查看最终统计
```

---

**提示**: 如果需要处理非常大的数据集（10万+记录），建议联系技术支持实现异步任务模式。

**文档更新**: 2026-02-01  
**版本**: v1.0.0
